# 首页分类数量显示与待办事项交互优化

## 用户需求
1. 在首页的分类中添加对应的数量显示
2. 待办事项分类需要交互：完成一项后，数量会实时发生变化

## 修改工作总结

### 1. Timeline 组件数量统计
- 在 `Timeline.tsx` 中添加了 `categoryCounts` 计算逻辑，使用 `useMemo` 实时统计各分类的数量
- 对于 TODO 分类，只统计未完成的条目（`!entry.completed`）
- 其他分类统计所有条目

### 2. 分类按钮数量显示
- 在 Timeline 页面的分类按钮（待办事项、美好事情、值得反思）上添加了数量徽章
- 数量显示在分类标签右侧，使用小号字体和圆角背景
- 当分类被选中时，数量徽章样式会相应变化以保持视觉一致性
- 只有当数量大于 0 时才显示徽章

### 3. 待办事项完成交互
- 为 Timeline 中的 TODO 类型条目添加了点击切换完成状态的功能
- 在每条待办事项左侧添加了圆形复选框，未完成时显示空心圆圈，完成时显示绿色实心圆圈带对勾
- 点击待办事项内容或复选框都可以切换完成状态
- 完成后的待办事项会显示删除线并降低透明度
- 完成状态切换会实时更新数量统计（通过 `useMemo` 依赖 `entries` 自动更新）

### 4. 代码优化
- 导入了 `DiaryEntry` 类型以支持类型检查
- 在编辑和删除按钮的点击事件中添加了 `stopPropagation()`，防止与待办事项的点击切换功能冲突
- 确保所有数量统计逻辑与 `CategoryView` 保持一致（TODO 只统计未完成项）

## 系统接收提示词
“给首页的分类添加对应的数量显示，同时待办事项分类做个交互，完成一项对应的数量就会发生变化”

## 结论
首页分类按钮现在会显示实时数量，待办事项支持点击切换完成状态，完成后的数量会立即更新，提供了更好的交互体验。

